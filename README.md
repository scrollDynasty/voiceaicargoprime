# ๐ AI Voice Assistant - SIP/RTP System

## ๐ ะะฑะฝะพะฒะปะตะฝะธะต ัะธััะตะผั

**ะะพะปะฝะพัััั ะฟะตัะตัะฐะฑะพัะฐะฝะฐ ะฐััะธัะตะบัััะฐ:**
- โ **ะฃะดะฐะปะตะฝะพ**: ะัะต ะฒะตะฑ-ะบะพะผะฟะพะฝะตะฝัั (Flask, webhooks, WebRTC, WebPhone)
- โ **ะะพะฑะฐะฒะปะตะฝะพ**: ะััะผะฐั SIP/RTP ะธะฝัะตะณัะฐัะธั ะดะปั ะฟะตัะตัะฒะฐัะฐ ัะตะปะตัะพะฝะฝัั ะทะฒะพะฝะบะพะฒ
- โ **ะะตะฐะปะธะทะพะฒะฐะฝะพ**: AI ะพะฑัะฐะฑะพัะบะฐ ะณะพะปะพัะพะฒัั ะทะฐะฟัะพัะพะฒ ัะตัะตะท ัะตะปะตัะพะฝะธั ะฑะตะท ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

## ๐ ะะฟะธัะฐะฝะธะต

ะกะธััะตะผะฐ AI ะณะพะปะพัะพะฒะพะณะพ ะฐััะธััะตะฝัะฐ, ะบะพัะพัะฐั:
- ะัะธะฝะธะผะฐะตั ะฒัะพะดััะธะต ัะตะปะตัะพะฝะฝัะต ะทะฒะพะฝะบะธ ัะตัะตะท SIP ะฟัะพัะพะบะพะป
- ะะฑัะฐะฑะฐััะฒะฐะตั ะณะพะปะพั ะฐะฑะพะฝะตะฝัะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ ัะตัะตะท RTP
- ะัะฟะพะปัะทัะตั AI ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะพะฒ
- ะัะตะพะฑัะฐะทัะตั ะพัะฒะตัั ะพะฑัะฐัะฝะพ ะฒ ัะตัั
- ะะฐะฑะพัะฐะตั ะบะฐะบ ะฟะพะปะฝะพัะตะฝะฝะฐั ัะตะปะตัะพะฝะฝะฐั ัะธััะตะผะฐ ะฑะตะท ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ     SIP      โโโโโโโโโโโโโโโโ     Audio      โโโโโโโโโโโโโโโโ
โ   IP Phone  โโโโโโโโโโโโโโโบโ  SIP Server  โโโโโโโโโโโโโโโโโบโ AI Processor โ
โ   (Caller)  โโโโโโโโโโโโโโโโค  (Port 5060) โโโโโโโโโโโโโโโโโโค   (Whisper)  โ
โโโโโโโโโโโโโโโ     RTP      โโโโโโโโโโโโโโโโ                โโโโโโโโโโโโโโโโ
                                     โ                               โ
                                     โ                               โผ
                              โโโโโโโโผโโโโโโโโ              โโโโโโโโโโโโโโโโโโ
                              โ RTP Handler  โ              โ  OpenAI GPT    โ
                              โ(Ports 10000+)โ              โ  (AI Responses)โ
                              โโโโโโโโโโโโโโโโ              โโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
.
โโโ sip_server.py           # ะัะฝะพะฒะฝะพะน SIP ัะตัะฒะตั
โโโ sip_voice_ai_engine.py  # AI ะดะฒะธะถะพะบ ะดะปั ะพะฑัะฐะฑะพัะบะธ ะทะฐะฟัะพัะพะฒ
โโโ sip_speech_processor.py # ะัะตะพะฑัะฐะทะพะฒะฐะฝะธะต ัะตััโัะตะบัั
โโโ requirements.txt        # Python ะทะฐะฒะธัะธะผะพััะธ
โโโ install_sip_dependencies.sh  # ะฃััะฐะฝะพะฒะบะฐ ัะธััะตะผะฝัั ะฟะฐะบะตัะพะฒ
โโโ start_sip_system.sh     # ะะฐะฟััะบ ัะธััะตะผั
โโโ stop_sip_system.sh      # ะััะฐะฝะพะฒะบะฐ ัะธััะตะผั
โโโ README.md              # ะญัะพั ัะฐะนะป
```

## ๐๏ธ ะฃััะฐะฝะพะฒะบะฐ

### 1. ะกะธััะตะผะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Ubuntu/Debian Linux (ัะตััะธัะพะฒะฐะปะพัั ะฝะฐ Ubuntu 20.04+)
- Python 3.8+
- ะะธะฝะธะผัะผ 4GB RAM (ะดะปั AI ะผะพะดะตะปะตะน)
- ะัะบััััะต ะฟะพััั: 5060 (SIP), 10000-10100 (RTP)

### 2. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
# ะกะดะตะปะฐัั ัะบัะธะฟั ะธัะฟะพะปะฝัะตะผัะผ
chmod +x install_sip_dependencies.sh

# ะะฐะฟัััะธัั ัััะฐะฝะพะฒะบั
./install_sip_dependencies.sh
```

### 3. ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env`:

```bash
# OpenAI API ะบะปัั ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะพะฒ
OPENAI_API_KEY=your_openai_api_key_here

# ะะฟัะธะพะฝะฐะปัะฝะพ: ะฝะฐัััะพะนะบะธ SIP
SIP_PORT=5060
RTP_START_PORT=10000
```

## ๐ ะะฐะฟััะบ ัะธััะตะผั

### ะะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ (ัะตัะตะท ัะบัะธะฟั):

```bash
# ะกะดะตะปะฐัั ัะบัะธะฟั ะธัะฟะพะปะฝัะตะผัะผ
chmod +x start_sip_system.sh

# ะะฐะฟัััะธัั ั ะฐะฒัะพะพะฟัะตะดะตะปะตะฝะธะตะผ IP
./start_sip_system.sh

# ะะปะธ ัะบะฐะทะฐัั ะบะพะฝะบัะตัะฝัะน IP ะธ ะฟะพัั
./start_sip_system.sh 192.168.1.100 5060
```

### ะััะฝะพะน ะทะฐะฟััะบ:

```bash
# ะะฐะฟััะบ SIP ัะตัะฒะตัะฐ
python3 sip_server.py [IP_ะฐะดัะตั] [SIP_ะฟะพัั]

# ะัะธะผะตัั:
python3 sip_server.py                    # ะัะฟะพะปัะทัะตั 0.0.0.0:5060
python3 sip_server.py 192.168.1.100      # ะัะฟะพะปัะทัะตั ัะบะฐะทะฐะฝะฝัะน IP ะธ ะฟะพัั 5060
python3 sip_server.py 192.168.1.100 5070 # ะัะฟะพะปัะทัะตั ัะบะฐะทะฐะฝะฝัะน IP ะธ ะฟะพัั
```

## ๐ ะััะฐะฝะพะฒะบะฐ ัะธััะตะผั

### ะงะตัะตะท ัะบัะธะฟั:

```bash
./stop_sip_system.sh
```

### ะัััะฝัั:

```bash
# ะะฐะนัะธ ะฟัะพัะตัั
ps aux | grep sip_server.py

# ะััะฐะฝะพะฒะธัั ะฟัะพัะตัั
kill <PID>
```

## ๐ ะะฐัััะพะนะบะฐ SIP ะบะปะธะตะฝัะฐ

ะะปั ัะตััะธัะพะฒะฐะฝะธั ะธัะฟะพะปัะทัะนัะต ะปัะฑะพะน SIP ะบะปะธะตะฝั (Zoiper, Linphone, X-Lite):

- **Server/Domain**: IP ะฐะดัะตั ะฒะฐัะตะณะพ ัะตัะฒะตัะฐ
- **Port**: 5060 (ะธะปะธ ัะบะฐะทะฐะฝะฝัะน ะฟัะธ ะทะฐะฟััะบะต)
- **Username**: ai (ะธะปะธ ะปัะฑะพะน)
- **Password**: ะฝะต ััะตะฑัะตััั
- **Transport**: UDP

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

1. ะะฐะฟัััะธัะต ัะธััะตะผั
2. ะะฐัััะพะนัะต SIP ะบะปะธะตะฝั
3. ะะพะทะฒะพะฝะธัะต ะฝะฐ SIP ัะตัะฒะตั
4. ะะพะฒะพัะธัะต ะฟะพัะปะต ัะพะตะดะธะฝะตะฝะธั
5. AI ะพะฑัะฐะฑะพัะฐะตั ะฒะฐั ะทะฐะฟัะพั ะธ ะพัะฒะตัะธั ะณะพะปะพัะพะผ

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะัะพัะผะพัั ะปะพะณะพะฒ:

```bash
# ะ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
tail -f logs/sip_server.log

# ะะพัะปะตะดะฝะธะต 100 ัััะพะบ
tail -n 100 logs/sip_server.log

# ะะพะธัะบ ะพัะธะฑะพะบ
grep ERROR logs/sip_server.log
```

### ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ:

```bash
# ะัะพะฒะตัะธัั, ััะพ SIP ะฟะพัั ะพัะบััั
netstat -tuln | grep 5060

# ะัะพะฒะตัะธัั RTP ะฟะพััั
netstat -tuln | grep 1000
```

## ๐ง ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### SIP ัะตัะฒะตั ะฝะต ะทะฐะฟััะบะฐะตััั:

```bash
# ะัะพะฒะตัะธัั, ะฝะต ะทะฐะฝัั ะปะธ ะฟะพัั
sudo lsof -i :5060

# ะฃะฑะธัั ะฟัะพัะตัั, ะทะฐะฝะธะผะฐััะธะน ะฟะพัั
sudo kill -9 <PID>
```

### ะะตั ะทะฒัะบะฐ:

1. ะัะพะฒะตัััะต ัะฐะนัะฒะพะป - ะพัะบัะพะนัะต RTP ะฟะพััั 10000-10100
2. ะัะพะฒะตัััะต NAT ะฝะฐัััะพะนะบะธ ะตัะปะธ ัะตัะฒะตั ะทะฐ ัะพััะตัะพะผ
3. ะฃะฑะตะดะธัะตัั ััะพ ะฐัะดะธะพ ะบะพะดะตะบะธ ัะพะฒะฟะฐะดะฐัั (PCMU/PCMA)

### AI ะฝะต ะพัะฒะตัะฐะตั:

1. ะัะพะฒะตัััะต OPENAI_API_KEY ะฒ .env ัะฐะนะปะต
2. ะัะพะฒะตัััะต ะธะฝัะตัะฝะตั ัะพะตะดะธะฝะตะฝะธะต
3. ะกะผะพััะธัะต ะปะพะณะธ ะฝะฐ ะฝะฐะปะธัะธะต ะพัะธะฑะพะบ API

## ๐ ะะตะทะพะฟะฐัะฝะพััั

โ๏ธ **ะะฐะถะฝะพ**: ะขะตะบััะฐั ะฒะตััะธั ะะ ะฒะบะปััะฐะตั ะฐััะตะฝัะธัะธะบะฐัะธั SIP!

ะะปั production ะธัะฟะพะปัะทะพะฒะฐะฝะธั:
1. ะะพะฑะฐะฒััะต SIP ะฐััะตะฝัะธัะธะบะฐัะธั (digest authentication)
2. ะัะฟะพะปัะทัะนัะต TLS ะดะปั SIP (SIPS)
3. ะะฐัััะพะนัะต ัะฐะนัะฒะพะป - ัะฐะทัะตัะธัะต ัะพะปัะบะพ ะฝัะถะฝัะต IP
4. ะัะฟะพะปัะทัะนัะต SRTP ะดะปั ัะธััะพะฒะฐะฝะธั ะฐัะดะธะพ

## ๐ ะะธัะตะฝะทะธั

MIT License

## ๐ค ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะปะพะณะธ ะฒ ะฟะฐะฟะบะต `logs/`
2. ะฃะฑะตะดะธัะตัั ััะพ ะฒัะต ะทะฐะฒะธัะธะผะพััะธ ัััะฐะฝะพะฒะปะตะฝั
3. ะัะพะฒะตัััะต ัะตัะตะฒัะต ะฝะฐัััะพะนะบะธ ะธ ะฟะพััั

---

**ะัะธะผะตัะฐะฝะธะต**: ะญัะพ ะดะตะผะพะฝัััะฐัะธะพะฝะฝะฐั ะฒะตััะธั. ะะปั production ะธัะฟะพะปัะทะพะฒะฐะฝะธั ััะตะฑัะตััั ะดะพะฟะพะปะฝะธัะตะปัะฝะฐั ะฝะฐัััะพะนะบะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ ะธ ะพะฟัะธะผะธะทะฐัะธั.