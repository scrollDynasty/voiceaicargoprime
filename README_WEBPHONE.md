# Voice AI System with RingCentral WebPhone Integration
## Prime Cargo Logistics

### üöÄ –û–±–∑–æ—Ä –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RingCentral WebPhone (JavaScript) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–µ–º–∞ –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤ –∏ Python AI –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—á–∏. –†–µ—à–µ–Ω–∏–µ –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ Security/AI scopes –≤ RingCentral API.

### üìã –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  RingCentral Cloud  ‚îÇ         ‚îÇ   WebPhone Bridge    ‚îÇ
‚îÇ                     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  (Node.js/JavaScript)‚îÇ
‚îÇ  Incoming Calls     ‚îÇ  WebRTC ‚îÇ                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ  - Auto Answer       ‚îÇ
                                ‚îÇ  - Audio Capture     ‚îÇ
                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
                                     WebSocket
                                    Audio Stream
                                          ‚îÇ
                                          ‚ñº
                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                ‚îÇ   Python AI Server   ‚îÇ
                                ‚îÇ                      ‚îÇ
                                ‚îÇ  - Speech-to-Text    ‚îÇ
                                ‚îÇ  - LLM Processing    ‚îÇ
                                ‚îÇ  - Text-to-Speech    ‚îÇ
                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. **WebPhone Bridge** (Node.js)
- **–§–∞–π–ª**: `webphone-bridge/webphone_bridge.js`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–µ–º –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
  - –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∞ –æ—Ç –∑–≤–æ–Ω—è—â–µ–≥–æ
  - –ü–µ—Ä–µ–¥–∞—á–∞ –∞—É–¥–∏–æ –≤ Python —á–µ—Ä–µ–∑ WebSocket
  - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–µ—á–∏ –æ–±—Ä–∞—Ç–Ω–æ

#### 2. **Python AI Server**
- **–§–∞–π–ª—ã**: 
  - `webhook_server.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
  - `audio_stream_handler.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–æ–≤
  - `speech_processor.py` - STT/TTS
  - `llm_handler.py` - AI –æ—Ç–≤–µ—Ç—ã
- **–§—É–Ω–∫—Ü–∏–∏**:
  - WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–µ–º–∞ –∞—É–¥–∏–æ
  - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (Whisper)
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ (Llama 3.1)
  - –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (Coqui TTS)

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

#### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Node.js >= 16.0.0
- Python >= 3.8
- CUDA-—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- RingCentral –∞–∫–∫–∞—É–Ω—Ç —Å WebPhone –¥–æ—Å—Ç—É–ø–æ–º

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
git clone https://github.com/scrollDynasty/voiceaicargoprime.git
cd voiceaicargoprime
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
# RingCentral –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
RINGCENTRAL_CLIENT_ID=your_client_id
RINGCENTRAL_CLIENT_SECRET=your_client_secret
RINGCENTRAL_JWT_TOKEN=your_jwt_token
RINGCENTRAL_SERVER=https://platform.ringcentral.com
```

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ `webphone-bridge/`:
```env
# –ö–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RingCentral
RINGCENTRAL_CLIENT_ID=your_client_id
RINGCENTRAL_CLIENT_SECRET=your_client_secret
RINGCENTRAL_JWT_TOKEN=your_jwt_token
RINGCENTRAL_SERVER=https://platform.ringcentral.com

# Python —Å–µ—Ä–≤–µ—Ä
PYTHON_AI_SERVER=http://localhost:5000
PYTHON_AI_ENDPOINT=/api/handle-webphone-call

# WebSocket –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
WEBSOCKET_PORT=8080
```

#### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

Python:
```bash
pip install -r requirements.txt
```

Node.js:
```bash
cd webphone-bridge
npm install
cd ..
```

### üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:
```bash
chmod +x start_system.sh stop_system.sh
./start_system.sh
```

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:

1. Python —Å–µ—Ä–≤–µ—Ä:
```bash
python webhook_server.py
```

2. WebPhone Bridge:
```bash
cd webphone-bridge
node webphone_bridge.js
```

### üìû –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫** ‚Üí RingCentral –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç SIP INVITE –Ω–∞ WebPhone
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç** ‚Üí WebPhone –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ `session.accept()`
3. **–ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ** ‚Üí WebPhone –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫ –æ—Ç –∑–≤–æ–Ω—è—â–µ–≥–æ
4. **–°—Ç—Ä–∏–º–∏–Ω–≥ –≤ Python** ‚Üí –ê—É–¥–∏–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket –Ω–∞ Python —Å–µ—Ä–≤–µ—Ä
5. **AI –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - STT: Whisper —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ä–µ—á—å
   - LLM: Llama 3.1 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
   - TTS: Coqui —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä–µ—á—å
6. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** ‚Üí –°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ –∑–≤–æ–Ω–∫–µ

### üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
# Health check
curl http://localhost:5000/health

# WebPhone status
curl http://localhost:5000/api/webphone/status
```

#### –õ–æ–≥–∏:
- Python: `logs/python-server.log`
- WebPhone: `logs/webphone-bridge.log`
- –ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∏: `recordings/`

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
cd webphone-bridge
node test_connection.js
```

### üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

#### WebPhone –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–≤–æ–Ω–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JWT —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –∞–∫–∫–∞—É–Ω—Ç–∞ –µ—Å—Ç—å WebPhone permissions
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç WebSocket –ø–æ—Ä—Ç 8080

#### –ù–µ—Ç –∞—É–¥–∏–æ –æ—Ç Python:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Whisper –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ GPU –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è TTS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ

#### –û—à–∏–±–∫–∞ 403 –≤ RingCentral:
- –≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–π –æ—à–∏–±–∫–∏!
- WebPhone –Ω–µ —Ç—Ä–µ–±—É–µ—Ç Security/AI scopes

### üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞**: 1-3 —Å–µ–∫—É–Ω–¥—ã
- **–ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤**: 5 (RTX 4060 8GB)
- **–ö–∞—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ**: 16kHz, –º–æ–Ω–æ
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` —Ñ–∞–π–ª–∞—Ö
- WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ localhost
- –í—Å–µ –∑–≤–æ–Ω–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞
- –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π

### üìù API Endpoints

#### POST /api/handle-webphone-call
–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞ –æ—Ç WebPhone
```json
{
  "callId": "uuid",
  "sessionId": "sip-session-id",
  "from": "+1234567890",
  "to": "+0987654321",
  "timestamp": "2024-01-01T00:00:00Z"
}
```

#### GET /api/webphone/status
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```json
{
  "status": "operational",
  "websocket_running": true,
  "active_calls": 2,
  "calls": [...]
}
```

### ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

### üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª

### üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã

Prime Cargo Logistics Inc.
- Email: support@primecargologistics.com
- Phone: (513) 572-5833

---

**–í–∞–∂–Ω–æ**: –≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ production —Å—Ä–µ–¥–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.