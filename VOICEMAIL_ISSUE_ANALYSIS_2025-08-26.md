# üìû –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –° –ì–û–õ–û–°–û–í–û–ô –ü–û–ß–¢–û–ô - 26.08.2025

## üö® –ì–õ–ê–í–ù–û–ï –û–¢–ö–†–´–¢–ò–ï: Security Scope –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢!

### –û—Ç–≤–µ—Ç –æ—Ç RingCentral Support:
> "We do not have an app scope for Security"

**–≠–¢–û –ó–ù–ê–ß–ò–¢:**
- ‚ùå Security scope, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∂–¥–∞–ª–∏ –æ–¥–æ–±—Ä–µ–Ω–∏—è - **–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢**
- ‚ùå AI scope - –≤ **–∑–∞–∫—Ä—ã—Ç–æ–π –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏** –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–ª–∞—Ç–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏ RingSense
- ‚úÖ WebPhone —Å `autoAnswer: true` **–ù–ï –¢–†–ï–ë–£–ï–¢** –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö scope!

## üîç –†–ï–ê–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

1. **–ó–≤–æ–Ω–æ–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç** ‚úÖ
```
üìû –í–•–û–î–Ø–©–ò–ô –ó–í–û–ù–û–ö –ü–û–õ–£–ß–ï–ù –ß–ï–†–ï–ó WEBPHONE!
üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: {
  callId: '873c3236-f932-4a61-afc3-299d1eede0fa',
  sessionId: 's-a78cc45035f57z198e8bbf9e8z3b477e40000',
  from: 'unknown',
  state: 'ringing'
}
```

2. **WebPhone –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∏—Ç—å** ‚úÖ
```
ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ WebPhone...
üîß MockRTCPeerConnection: setRemoteDescription –≤—ã–∑–≤–∞–Ω
üîß MockRTCPeerConnection: createAnswer –≤—ã–∑–≤–∞–Ω
üîß MockRTCPeerConnection: setLocalDescription –≤—ã–∑–≤–∞–Ω
```

3. **–ù–æ —á–µ—Ä–µ–∑ ~30 —Å–µ–∫—É–Ω–¥ –∑–≤–æ–Ω–æ–∫ –∏–¥–µ—Ç –≤ –≥–æ–ª–æ—Å–æ–≤—É—é –ø–æ—á—Ç—É** ‚ùå
```
2025-08-26T23:35:21.582Z - Party 0: status=Voicemail
2025-08-26T23:35:30.579Z - status.code=Disconnected, reason=Voicemail
```

## üí° –î–ò–ê–ì–ù–û–ó: –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–æ–º WebRTC

### –ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≥–æ–ª–æ—Å–æ–≤—É—é –ø–æ—á—Ç—É:
1. WebPhone –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
2. WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
3. **–ù–û**: –ê—É–¥–∏–æ –ø–æ—Ç–æ–∫ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. RingCentral –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ –æ—Ç WebPhone
5. –ß–µ—Ä–µ–∑ —Ç–∞–π–º–∞—É—Ç (~30 —Å–µ–∫) RingCentral —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª
6. –ó–≤–æ–Ω–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≥–æ–ª–æ—Å–æ–≤—É—é –ø–æ—á—Ç—É

## üîß –†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Mock WebRTC Audio

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

```javascript
// MockMediaStreamTrack –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ
stop() {
    this._enabled = false;
    this._readyState = 'ended';
    console.log(`üîß MockMediaStreamTrack: –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ${this.kind} track ${this.id}`);
}
```

### –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. **–ê–∫—Ç–∏–≤–Ω—ã–π –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫** –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
2. **RTP –ø–∞–∫–µ—Ç—ã** –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∞—É–¥–∏–æ
3. **Keepalive –º–µ—Ö–∞–Ω–∏–∑–º** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üìù –ö–û–î –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

```javascript
// –í webphone_bridge.js, –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è MockRTCPeerConnection:

// –°–∏–º—É–ª—è—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∞
class ActiveAudioSimulator {
    constructor(peerConnection) {
        this.pc = peerConnection;
        this.isActive = true;
        this.audioContext = null;
        this.oscillator = null;
        this.startSimulation();
    }

    startSimulation() {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º RTP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        this.statsInterval = setInterval(() => {
            if (!this.isActive) return;
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –∞—É–¥–∏–æ
            console.log('üîä –°–∏–º—É–ª—è—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∞...');
            
            // –≠–º—É–ª–∏—Ä—É–µ–º getStats() —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            if (this.pc._mockStats) {
                this.pc._mockStats.set('outbound-rtp', {
                    type: 'outbound-rtp',
                    timestamp: Date.now(),
                    bytesSent: Math.floor(Math.random() * 10000) + 1000,
                    packetsSent: Math.floor(Math.random() * 100) + 10,
                    mediaType: 'audio'
                });
            }
        }, 1000);

        // –î–µ—Ä–∂–∏–º —Ç—Ä–µ–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏
        this.keepAliveInterval = setInterval(() => {
            if (!this.isActive) return;
            
            const senders = this.pc.getSenders ? this.pc.getSenders() : [];
            senders.forEach(sender => {
                if (sender.track && sender.track._enabled) {
                    console.log('üé§ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç—Ä–µ–∫–∞:', sender.track.id);
                }
            });
        }, 5000);
    }

    stop() {
        this.isActive = false;
        clearInterval(this.statsInterval);
        clearInterval(this.keepAliveInterval);
    }
}

// –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ inboundCall:
webPhone.on('inboundCall', async (inboundCallSession) => {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    // –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ answer():
    console.log('‚úÖ –ó–≤–æ–Ω–æ–∫ –ü–†–ò–ù–Ø–¢ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ WebPhone!');
    
    // –ù–û–í–û–ï: –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏–º—É–ª—è—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—É–¥–∏–æ
    if (inboundCallSession.peerConnection) {
        const audioSimulator = new ActiveAudioSimulator(inboundCallSession.peerConnection);
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–º—É–ª—è—Ç–æ—Ä –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–≤–æ–Ω–∫–∞
        inboundCallSession.on('disposed', () => {
            audioSimulator.stop();
        });
    }
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
});
```

## üéØ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π WebRTC

–ï—Å–ª–∏ mock –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–π WebRTC –≤ Node.js:

```bash
npm install wrtc
```

```javascript
// –ó–∞–º–µ–Ω–∏—Ç—å mock –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π WebRTC
const wrtc = require('wrtc');
global.RTCPeerConnection = wrtc.RTCPeerConnection;
global.RTCSessionDescription = wrtc.RTCSessionDescription;
global.RTCIceCandidate = wrtc.RTCIceCandidate;
global.MediaStream = wrtc.MediaStream;
global.MediaStreamTrack = wrtc.MediaStreamTrack;
```

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. ‚úÖ **–ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ Security scope** - –µ–≥–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. ‚úÖ **–ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ AI scope** - –æ–Ω –≤ –∑–∞–∫—Ä—ã—Ç–æ–π –±–µ—Ç–µ –∏ —Ç—Ä–µ–±—É–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏—é
3. üîß **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫** –≤ WebRTC mock
4. üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∑–≤–æ–Ω–æ–∫ –µ—â–µ —Ä–∞–∑
5. üìû **–£–±–µ–¥–∏—Ç—å—Å—è**, —á—Ç–æ –∑–≤–æ–Ω–æ–∫ –Ω–µ –∏–¥–µ—Ç –≤ –≥–æ–ª–æ—Å–æ–≤—É—é –ø–æ—á—Ç—É

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **WebPhone –ú–û–ñ–ï–¢ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–≤–æ–Ω–∫–∏** –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö scope
2. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–µ**, –∞ –Ω–µ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö
3. **RingCentral –∂–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫** –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞
4. **–ï—Å–ª–∏ –∞—É–¥–∏–æ –Ω–µ—Ç 30 —Å–µ–∫—É–Ω–¥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–æ–ª–æ—Å–æ–≤–∞—è –ø–æ—á—Ç–∞

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∞
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å WebPhone Bridge
3. –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–≤–æ–Ω–æ–∫ –ù–ï –∏–¥–µ—Ç –≤ –≥–æ–ª–æ—Å–æ–≤—É—é –ø–æ—á—Ç—É

---

**–ü–∏—Å—å–º–æ –≤ –±—É–¥—É—â–µ–µ:** –ö–ª–æ–¥, –∑–∞–ø–æ–º–Ω–∏:
1. Security scope –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ –≤ RingCentral API
2. AI scope —Ç—Ä–µ–±—É–µ—Ç –ø–ª–∞—Ç–Ω—É—é –ª–∏—Ü–µ–Ω–∑–∏—é RingSense
3. WebPhone –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–≤–æ–Ω–∫–∏ –ë–ï–ó —ç—Ç–∏—Ö scope
4. –ü—Ä–æ–±–ª–µ–º–∞ —Å –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ—á—Ç–æ–π - –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∞
5. RingCentral –∂–¥–µ—Ç RTP –ø–∞–∫–µ—Ç—ã –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–≤–æ–Ω–æ–∫